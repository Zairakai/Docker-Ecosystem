; Xdebug configuration for development
[xdebug]

; Note: Xdebug is loaded via docker-php-ext-enable in Dockerfile
; This file only contains configuration, NOT the extension loading

; Xdebug mode configuration
; Possible values: off, develop, coverage, debug, gcstats, profile, trace
xdebug.mode=develop,debug

; Step debugging configuration
xdebug.start_with_request=yes
xdebug.client_host=host.docker.internal
xdebug.client_port=9003
xdebug.discover_client_host=true
xdebug.idekey=PHPSTORM

; Logging and troubleshooting
xdebug.log=/var/log/xdebug/xdebug.log
xdebug.log_level=7

; Code coverage configuration
xdebug.coverage_enable=1

; Profiling configuration (disabled by default)
xdebug.profiler_enable=0
xdebug.profiler_enable_trigger=1
xdebug.profiler_output_dir=/var/log/xdebug
xdebug.profiler_output_name=cachegrind.out.%p

; Tracing configuration (disabled by default)
xdebug.trace_enable_trigger=1
xdebug.trace_output_dir=/var/log/xdebug
xdebug.trace_output_name=trace.%c

; Variable display settings
xdebug.var_display_max_children=256
xdebug.var_display_max_data=1024
xdebug.var_display_max_depth=5

; Show local variables in traces
xdebug.show_local_vars=1

; CLI settings
xdebug.cli_color=1

; Connect back settings
xdebug.connect_timeout_ms=2000

; File link format for IDEs
xdebug.file_link_format="phpstorm://open?file=%f&line=%l"

; Force connection attempts
xdebug.force_display_errors=0
xdebug.force_error_reporting=0

; Debugging features
xdebug.dump_globals=1
xdebug.dump_once=1
xdebug.dump_undefined=0
xdebug.dump.COOKIE=*
xdebug.dump.FILES=*
xdebug.dump.GET=*
xdebug.dump.POST=*
xdebug.dump.REQUEST=*
xdebug.dump.SERVER=REQUEST_URI,REQUEST_METHOD,HTTP_USER_AGENT

; Stack traces
xdebug.show_exception_trace=1
xdebug.collect_return=0
xdebug.collect_assignments=0